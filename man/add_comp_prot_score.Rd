% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_comp_prot_score.R
\name{add_comp_prot_score}
\alias{add_comp_prot_score}
\title{Add overall Protection composite score and need flags}
\usage{
add_comp_prot_score(df)
}
\arguments{
\item{df}{A \code{data.frame} or \code{tibble} containing numeric columns:
\itemize{
\item \code{comp_prot_score_movement} – severity for movement dimension
\item \code{comp_prot_score_practices} – severity for practices dimension
\item \code{comp_prot_score_rights} – severity for rights & services dimension
}

If any of these three columns are missing, the function will abort, reminding you to run the corresponding prep functions first.}
}
\value{
The input \code{df}, with three new columns:
\itemize{
\item \code{comp_prot_score} – overall protection severity (maximum of the three dimensions)
\item \code{comp_prot_in_need} – binary (0/1): 1 if \code{comp_prot_score >= 3}, else 0
\item \code{comp_prot_in_acute_need} – binary (0/1): 1 if \code{comp_prot_score >= 4}, else 0
}
}
\description{
Assumes that per‑dimension severity scores have already been computed and added to \code{df} by earlier functions: \code{\link[=add_prot_score_movement]{add_prot_score_movement()}}, \code{\link[=add_prot_score_practices]{add_prot_score_practices()}}, and \code{\link[=add_prot_score_rights]{add_prot_score_rights()}}.
This function performs only \strong{Step 4} of the 2025 Protection Composite workflow: it takes the maximum of those three existing columns to create \code{comp_prot_score}, then generates binary “in need” indicators.
}
\details{
\itemize{
\item \strong{Column checks} via \code{\link[purrr:imap]{purrr::iwalk()}} ensure the three dimension scores exist.
\item \strong{Computation} uses \code{\link[=pmax]{pmax()}} (with \code{na.rm = FALSE})
\item \strong{Thresholds} (3 for “in need”, 4 for “acute need”) are currently hard‑coded.
}
}
