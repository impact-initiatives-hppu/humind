# humind

`humind` provides functions to compose common humanitarian composite
indicators related to IMPACT Multi-Sector Needs Assessments (MSNAs),
including:

- MSNI framework indicators: sectoral composites, MSNI metrics, and all
  required recoding
- Food security indicators: rCSI, LCSI, HHS, FCS
- WASH indicator recoding to JMP classifications

The package follows the **Step â€“ Composition** approach of the IMPACT R
framework.

## Installation

Install the latest tagged release from GitHub:

``` r
# install.packages("devtools")
devtools::install_github("impact-initiatives-hppu/humind@v2025.1.4")
```

Verify the version:

``` r
packageVersion("humind")
# v2025.1.4
```

## ðŸ“š Guidance Note

A comprehensive **Guidance Note** is available
[here](https://acted.sharepoint.com/sites/IMPACT-Humanitarian_Planning_Prioritization/SitePages/MSNA%20analysis%20(LSG-MSNi).aspx).  
It provides essential background on the **MSNI framework** and
sector-specific guidance. Each sector includes a **â€œHumind Data
Workflowâ€** describing required steps and the relevant `humind`
functions.

> âš ï¸ **Read the Guidance Note thoroughly**â€”especially the *Data
> Workflow* sectionsâ€”before implementing analyses with `humind`.

> ðŸ“Œ A technical documentation guide (full MSNI workflow with runnable
> examples) will be added to this repository.

------------------------------------------------------------------------

## ðŸ“– 2025 Programmatic Changes

### Cross-cutting

- **Terminology migration**: *acute need* â†’ **severe need** (functions
  and outputs).

### MSNI & Sectoral Composites

- Consistent renaming of `*_in_acute_need` â†’ **`*_in_severe_need`**
  across all domains.

### Protection

- Complete **revamp** based on a new series of Tier 1 indicators related
  to Protection needs.
- Refined NA handling in rights and practices composites: DNK/PNTA no
  longer collapse the entire composite; only affected sub-scores are
  nullified.

### WASH

- Expanded handwashing facility categorization via
  [`add_handwashing_facility_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_handwashing_facility_cat.md)
  with explicit soap-type handling and harmonized observed vs.Â reported
  rules.
- Incorporated self-reported hygiene variants (availability of soap &
  water) and mapped them to JMP classifications.

### Health

- Warnings and NA propagation in
  [`add_loop_healthcare_needed_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_healthcare_needed_cat.md)
  for inconsistent inputs.
- Removal of the WGQs from the framework.

### SNFI

- Shelter issues increased **from 8 to 11** and remapped to the
  framework.
- Added one indicator to the security of tenure dimension:
  `hlp_eviction_risk`.
- Hygiene indicator removed from the FDS series; domestic tasks
  (incl.Â lighting) now total **4** (was 5).
- Optional shelter damages component added.

### Food Security

- New analysis step to assess the impact of livelihood coping strategies
  on Food Consumption (implemented in
  [`impactR4PHU`](https://github.com/impact-initiatives/impactR4PHU) and
  reflected in `humind`).

### Education

- Indicator renamed from `edu_disrupted_occupation` to
  **`edu_disrupted_attack`** to reflect â€œdirect attack on educationâ€.

------------------------------------------------------------------------

## âš ï¸ Breaking Changes

### 2025.1.4

No breaking changes

### 2025.1.3

No breaking changes

### 2025.1.2

**Function rename**

- `is_in_acute_need()` â†’
  **[`is_in_severe_need()`](https://impact-initiatives-hppu.github.io/humind/reference/is_in_need.md)**

**Output schema**

- All `*_in_acute_need` outputs â†’ **`*_in_severe_need`**  
  (MSNI, WASH, Health, Food Security, SNFI, Education, Protection).

**WASH**

- [`add_comp_wash()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_wash.md)
  default parameter: `drinking_water_quantity` now defaults to
  **`wash_hwise_drink`** (was `wash_drinking_water_quantity`).
- [`add_handwashing_facility_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_handwashing_facility_cat.md)
  now requires soap-type columns/args (`soap_type_observed`,
  `soap_type_reported`) and accepts vectorized â€œnoâ€ codes.
- Classification rules tightened: non-qualifying or undefined soap types
  **demote `basic` â†’ `limited`**; NA handling stricter in reported path.

**Protection**

- DNK/PNTA handling refined: composites are NA **only if both
  sub-dimensions are NA**.

**Healthcare**

- [`add_loop_healthcare_needed_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_healthcare_needed_cat.md)
  returns NA (with warnings) when `needed == yes` and `received == NA`.

------------------------------------------------------------------------

## ðŸ“Œ Issues and Feedback

Choose the appropriate template when opening an issue:

- **[ðŸ› Bug
  report](https://github.com/impact-initiatives-hppu/humind/issues/new?template=bug-report.yml&labels=bug,triage)**
  â€“ Reproducible errors or unexpected behavior.  
- **[ðŸ§® Indicator Logic
  Change](https://github.com/impact-initiatives-hppu/humind/issues/new?template=indicator_logic_change.yml&labels=indicator-logic)**
  â€“ Add, update, or fix logic for indicators, scoring, or
  categorization.  
- **[âœ¨ Feature
  request](https://github.com/impact-initiatives-hppu/humind/issues/new?template=feature_request.yml&labels=enhancement)**
  â€“ Suggest new features or enhancements.  
- **[ðŸ“– Documentation
  request](https://github.com/impact-initiatives-hppu/humind/issues/new?template=documentation_request.yml&labels=documentation)**
  â€“ Report incorrect, missing, or unclear documentation.

**Not sure where it fits?**  
Open a **[blank
issue](https://github.com/impact-initiatives-hppu/humind/issues/new)**
with as much detail as possible.

------------------------------------------------------------------------

## âš ï¸ Known Issues

### GitHub Credentials Error When Installing with devtools

When installing with `devtools::install_github()`, you may encounter:

``` r
> devtools::install_github("impact-initiatives-hppu/humind@v2025.1.4")
...
Error : Failed to install 'unknown package' from GitHub:
  HTTP error 401.
  Bad credentials
```

This is typically caused by outdated or incorrect GitHub credentials
stored in R. Public repositories do **not** require credentials. To
resolve:

``` r
library(gitcreds)
gitcreds_delete()
```

Then retry the installation.

------------------------------------------------------------------------

## License

`humind` is released under the [MIT
License](https://impact-initiatives-hppu.github.io/humind/LICENSE.md).

# Package index

## All functions

- [`add_access_to_phone_best()`](https://impact-initiatives-hppu.github.io/humind/reference/add_access_to_phone_best.md)
  [`add_access_to_phone_coverage()`](https://impact-initiatives-hppu.github.io/humind/reference/add_access_to_phone_best.md)
  : Add Best Phone Access and Coverage Information
- [`add_age_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_age_cat.md)
  [`add_age_18_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_age_cat.md)
  : Categorize Age and Create Age-Related Variables
- [`add_barriers_assistance_any()`](https://impact-initiatives-hppu.github.io/humind/reference/add_barriers_assistance_any.md)
  : Any barriers to accessing humanitarian assistance encountered
- [`add_comp_edu()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_edu.md)
  : Calculate Education Sectoral Composite Score and Need Indicators
- [`add_comp_foodsec()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_foodsec.md)
  : Calculate Food Security Sectoral Composite Score and Need Indicators
- [`add_comp_health()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_health.md)
  : Calculate Health Composite Score and Need Indicators
- [`add_comp_prot()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_prot.md)
  : Add overall Protection composite score and need flags
- [`add_comp_snfi()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_snfi.md)
  : Add SNFI Sectoral Composite Score and Need Indicators
- [`add_comp_wash()`](https://impact-initiatives-hppu.github.io/humind/reference/add_comp_wash.md)
  : Add WASH Sectoral Composite Score and Need Indicator
- [`add_drinking_water_source_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_drinking_water_source_cat.md)
  [`add_drinking_water_time_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_drinking_water_source_cat.md)
  [`add_drinking_water_time_threshold_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_drinking_water_source_cat.md)
  [`add_drinking_water_quality_jmp_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_drinking_water_source_cat.md)
  : Add Drinking Water Quality JMP Category
- [`add_expenditure_type_freq_rank()`](https://impact-initiatives-hppu.github.io/humind/reference/add_expenditure_type_freq_rank.md)
  : Rank Top 3 Frequent Expenditure Types
- [`add_expenditure_type_infreq_rank()`](https://impact-initiatives-hppu.github.io/humind/reference/add_expenditure_type_infreq_rank.md)
  : Rank Top 3 Infrequent Expenditure Types
- [`add_expenditure_type_prop_freq()`](https://impact-initiatives-hppu.github.io/humind/reference/add_expenditure_type_prop_freq.md)
  : Add Frequent Expenditure Type Amount as Proportions of Total
  Frequent Expenditure
- [`add_expenditure_type_prop_infreq()`](https://impact-initiatives-hppu.github.io/humind/reference/add_expenditure_type_prop_infreq.md)
  : Add Infrequent Expenditure Type Proportions
- [`add_expenditure_type_zero_freq()`](https://impact-initiatives-hppu.github.io/humind/reference/add_expenditure_type_zero_freq.md)
  : Add Zero for Skipped Frequent Expenditure Types
- [`add_expenditure_type_zero_infreq()`](https://impact-initiatives-hppu.github.io/humind/reference/add_expenditure_type_zero_infreq.md)
  : Add Zero for Skipped Infrequent Expenditure Types
- [`add_fds_cannot_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_fds_cannot_cat.md)
  : Add Functional Domestic Space Tasks Categories
- [`add_handwashing_facility_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_handwashing_facility_cat.md)
  : Add Handwashing Facility Category
- [`add_hoh_final()`](https://impact-initiatives-hppu.github.io/humind/reference/add_hoh_final.md)
  : Update Head of Household Information
- [`add_income_source_prop()`](https://impact-initiatives-hppu.github.io/humind/reference/add_income_source_prop.md)
  : Add Income Source Amounts as Proportions of Total Income
- [`add_income_source_rank()`](https://impact-initiatives-hppu.github.io/humind/reference/add_income_source_rank.md)
  : Add Income Source Categories, Count, and Ranking Top 3
- [`add_income_source_zero_to_sl()`](https://impact-initiatives-hppu.github.io/humind/reference/add_income_source_zero_to_sl.md)
  : Add Zero to Income Sources When Skipped
- [`add_loop_age_dummy()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_age_dummy.md)
  [`add_loop_age_dummy_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_age_dummy.md)
  [`add_loop_age_gender_dummy()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_age_dummy.md)
  [`add_loop_age_gender_dummy_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_age_dummy.md)
  : Add Age and Gender Dummy Variables for Demographics Loop
- [`add_loop_edu_access_d()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_access_d.md)
  [`add_loop_edu_access_d_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_access_d.md)
  : Add Education Access Dummy Variables
- [`add_loop_edu_barrier_protection_d()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_barrier_protection_d.md)
  [`add_loop_edu_barrier_protection_d_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_barrier_protection_d.md)
  : Add Child Protection Barriers to Education Variable
- [`add_loop_edu_disrupted_d()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_disrupted_d.md)
  [`add_loop_edu_disrupted_d_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_disrupted_d.md)
  : Add Education Disruption Categories
- [`add_loop_edu_ind_age_corrected()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_ind_age_corrected.md)
  [`add_loop_edu_ind_schooling_age_d_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_edu_ind_age_corrected.md)
  : Add a correct schooling age to the loop
- [`add_loop_healthcare_needed_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_healthcare_needed_cat.md)
  [`add_loop_healthcare_needed_cat_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_healthcare_needed_cat.md)
  : Add Healthcare Needed Category to Individual Data
- [`add_loop_wgq_ss()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_wgq_ss.md)
  [`add_loop_wgq_ss_to_main()`](https://impact-initiatives-hppu.github.io/humind/reference/add_loop_wgq_ss.md)
  : Prepare Washington Group Short Set (WG-SS) Disability Indicators
- [`add_msni()`](https://impact-initiatives-hppu.github.io/humind/reference/add_msni.md)
  : Add Multi-Sectoral Needs Index (MSNI) Score and Related Indicators
- [`add_occupancy_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_occupancy_cat.md)
  : Add Category of Occupancy Arrangement and Tenure Security
- [`add_prot_score_movement()`](https://impact-initiatives-hppu.github.io/humind/reference/add_prot_score_movement.md)
  : add_prot_score_movement
- [`add_prot_score_practices()`](https://impact-initiatives-hppu.github.io/humind/reference/add_prot_score_practices.md)
  : Add composite score for Ability to Participate in Safe Practices and
  Activities
- [`add_prot_score_rights()`](https://impact-initiatives-hppu.github.io/humind/reference/add_prot_score_rights.md)
  : Add composite score for Ability to Access Rights and Services
- [`add_quantile_interval()`](https://impact-initiatives-hppu.github.io/humind/reference/add_quantile_interval.md)
  : Add Quantile Intervals to Income Variable
- [`add_received_assistance()`](https://impact-initiatives-hppu.github.io/humind/reference/add_received_assistance.md)
  : Add Received Assistance (Combined Calculation)
- [`add_sanitation_facility_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_sanitation_facility_cat.md)
  [`add_sharing_sanitation_facility_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_sanitation_facility_cat.md)
  [`add_sharing_sanitation_facility_n_ind()`](https://impact-initiatives-hppu.github.io/humind/reference/add_sanitation_facility_cat.md)
  [`add_sanitation_facility_jmp_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_sanitation_facility_cat.md)
  : Sanitation Facility Classification
- [`add_shelter_damage_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_shelter_damage_cat.md)
  : Add Category of Shelter damage (Optional SNFI dimension)
- [`add_shelter_issue_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_shelter_issue_cat.md)
  : Add Number of Shelter Issues and Related Category
- [`add_shelter_type_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/add_shelter_type_cat.md)
  : Combine and Recode Shelter Types
- [`are_cols_numeric()`](https://impact-initiatives-hppu.github.io/humind/reference/are_cols_numeric.md)
  : Stop statement values are not numeric
- [`are_values_in_range()`](https://impact-initiatives-hppu.github.io/humind/reference/are_values_in_range.md)
  : Stop statement values are not in range
- [`are_values_in_set()`](https://impact-initiatives-hppu.github.io/humind/reference/are_values_in_set.md)
  : Stop statement values are not in set
- [`count_if_above_zero()`](https://impact-initiatives-hppu.github.io/humind/reference/count_if_above_zero.md)
  : Create Dummy Variables and Count Across if Above Zero
- [`if_not_in_stop()`](https://impact-initiatives-hppu.github.io/humind/reference/if_not_in_stop.md)
  : Stop statement "If not in colnames" with colnames
- [`impute_value()`](https://impact-initiatives-hppu.github.io/humind/reference/impute_value.md)
  [`impute_median()`](https://impact-initiatives-hppu.github.io/humind/reference/impute_value.md)
  : Impute Missing Values
- [`is_in_need()`](https://impact-initiatives-hppu.github.io/humind/reference/is_in_need.md)
  [`is_in_severe_need()`](https://impact-initiatives-hppu.github.io/humind/reference/is_in_need.md)
  : Add Dummy Variable for 'In Need' Status
- [`num_cat()`](https://impact-initiatives-hppu.github.io/humind/reference/num_cat.md)
  : Add Categories for a Numeric Variable
- [`rank_top3_vars()`](https://impact-initiatives-hppu.github.io/humind/reference/rank_top3_vars.md)
  : Rank Top 3 Variables
- [`subvec_in()`](https://impact-initiatives-hppu.github.io/humind/reference/subvec_in.md)
  : Subvec in
- [`subvec_not_in()`](https://impact-initiatives-hppu.github.io/humind/reference/subvec_not_in.md)
  : Subvec not in
- [`sum_vars()`](https://impact-initiatives-hppu.github.io/humind/reference/sum_vars.md)
  : Sum Columns Row-wise
- [`value_to_sl()`](https://impact-initiatives-hppu.github.io/humind/reference/value_to_sl.md)
  : Add a specific value to variables that were skipped

